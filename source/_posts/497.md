---
title: 【错误解决】网盘下载错误的一些解决方法
categories: notes
tags:
  - 小莫网盘
sticky: 100
comments: true
toc: true

only:
  - home
  - category
  - tag
date: 2023-07-07 15:33:51
pic:
---

> - 网盘相关问题已汇总到标签『[小莫网盘](/tags/小莫网盘/)』，可直接点击查看
> - 如果在使用[小莫网盘](https://pan.aoe.top/ "小莫网盘")的过程中遇到一些什么奇怪的问题，希望大家能在评论中提出一下。
> - 其他问题也可以加小莫的QQ群进行提问：[558461751](https://jq.qq.com/?_wv=1027&k=eyfGhiJe) （群答案：小莫）

## 问题1：下载提示需要登录

### 原因

主要原因是 生成的下载地址只有2小时的时限，超时之后会过期然后提示
```ini
发生错误: HTTP服务器401错误，Unauthorized
Token contains invalid signature
```
第三方下载器在识别到401错误后，会认为没有权限，所以会弹出个登录框让你登录账号以获取权限。
但这个实际上是token过期了，你并不需要登录账号，只需要更新新的下载地址就可以了。

### 获取新的下载地址方法
在网盘里面，右键“下载”按钮，选择“复制链接地址”
![](https://mod.3dmgame.com/static/upload/mod/202302/MOD63f82d3f72c0a.jpg@webp)

这里通常会生成最新的下载地址，如果地址过期，刷新页面可重新获取新的下载地址

### 在下载器里面更新地址
针对于不同人使用的不同下载工具，更新地址的方式也有所不同

- IDM方法（By：agaos）：
> - 点击地址链接失效的下载项
> - 点击【继续下载】
> - 【下载失败】（这里可能会提示重整下载块，此项不可关闭重整完成后会自动提示登录账户密码。）
> - 关闭下载【验证等弹出框】右键单击下载项选择【刷新下载地址】
> - 弹出【idm正在等待新地址】和【网页】（此网页不确定，有直接下载项，请检查浏览器自带下载器是否正在下载。也有下载页面也就是game页面或pan页面）
> - 从上面的方法 获取新的下载地址，
> - 返回idm【新建任务】 - 确认后等待一会提示：【这是已过期任务的新下载地址吗】，选择【是】提示【该文件的新地址已成功捕获】。
> - 此时【继续下载】就可以断点续传了。

- 比特彗星:
> 右键旧的任务选择 属性
> 然后新的下载地址 粘贴到 网址 里面，
> 等它提示文件大小后，点确定，然后继续下载就可以了
> ![](https://mod.3dmgame.com/static/upload/mod/202302/MOD63f82fe6d10c2.jpg)

- Aria2
> 将旧的任务删掉，然后新建任务, 使用新的地址下载
> 他就会自动读取到旧的进度,然后继续接着之前的下载

- 迅雷：
> 我没用过迅雷所以不知道迅雷的解决方法
> 如有大佬知道可以留言告诉我

- 浏览器:
> 如果你是使用浏览器下载的, 目前没有 有效的解决方案,
> 如有大佬知道可以留言告诉我



### 其他大佬提供的解决方法：

- syxxzzr：
可以用Aria2下载,直接添加原链接(比如https://pan.aoe.top/Games/GTA5/1.54/Grand Theft Auto V.zip),速度还挺快的,如果失败了就点重新下载就可以在原先的基础上继续下载了,而且不会提示登录


- SRS:
IDM右键文件后刷新下载地址，打开网页后下载捕获新地址后就能继续下载了

- agaos：
> 经过一晚上的解决，最终还是需要idm刷新下载地址的方法，可我发现idm刷新下载获取又有多种方法。
> 其中最有效的是以下办法：
> idm下载地址链接过期后，重启idm
> - 点击地址链接失效的下载项
> - 点击【继续下载】
> - 【下载失败】（这里可能会提示重整下载块，此项不可关闭重整完成后会自动提示登录账户密码。）
> - 关闭下载【验证等弹出框】右键单击下载项选择【刷新下载地址】
> - 弹出【idm正在等待新地址】和【网页】（此网页不确定，有直接下载项，请检查浏览器自带下载器是否正在下载。也有下载页面也就是game页面或pan页面）
> - 在弹出网页或自己找到的下载网页中寻找到之前你的下载项右键【复制链接】
> - 返回idm【新建任务】 - 确认后等待一会提示：【这是已过期任务的新下载地址吗】，选择【是】提示【该文件的新地址已成功捕获】。
> - 此时【继续下载】就可以断点续传了。
（由于并未看到详尽的解决办法，此方法又是最有效的，其他几种重新获取下载链接的方法就不码字了，不> 过大同小异，也许有人此办法无效，但可以尝试更改获取链接的方式。）


### 其他备注

经测试，下载时间超过2小时后，会出现需要登录的提示，尽量在2小时内将游戏下载完毕；
如果无法在2小时之内下载完毕，那么就使用像 `Aria2`、`IDM`、`BitComet` 这种支持断点续传的工具进行下载吧；



## 问题2：解压出错怎么办

一开始收到解压出错的时候，是地平线5这款游戏，当时硬盘是有点问题，我以为是压缩的时候因为磁盘损坏而导致压缩包损坏了，于是我换了一块新硬盘；

但是呢，换了新硬盘，重新打包上传后，依然有人反馈说解压出错？
然后我又提供了验证文件用的MD5，并且我自己解压一遍试了一下，确认没有问题后再上传的。

但依然有人反馈说有文件损坏的情况。

然后我陷入了沉思，为什么？你们用MD5验证文件没有问题，解压还是出错？还是说MD5验证没有通过吗？

既然我上传之前压缩包没有损坏，那是在哪损坏的？在服务器损坏的？是因为文件太大了吗？不应该啊，大表哥120G的压缩包，我只压一个包，上传后下载都没有出现损坏的情况，地平线5不是才94G吗？


直到，我在用IDM下载的时候，发现了这个东西
![](https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/005PVVAugy1gyjxmxjfcjj30ck04pjrw.jpg)

这个是在下载过程中，中途电脑关机，然后开机后重新继续下载时，IDM提示的弹窗，
然后我了解了一下IDM的下载过程，它是先将文件分成很多个小块，分块下载后再将其进行合并为原始文件。
这样就可以同时下载多个部分，以提高下载速度

方法是不错，但是呢，这样也容易导致文件损坏，如果下载过程中，有一个块不完整，那么就会影响整个文件的完整性，从而导致压缩包损坏的问题。

另外IDM还有一个问题，缓存块的盘和下保存的的位置可以不在同一个盘，跨盘合并文件，增加了文件损坏的可能性，

> 为什么呢，不知道你们有没有移动过大文件，比如说一个100G的压缩包，从E:/001/ 文件夹移动到 E:/002/ 文件夹，一般是瞬间移动，但如果是从E:/001/ 文件夹 移动到 D:/002/ 文件夹，则需要移动一段时间，此时的硬盘占用也会上升

这个锅倒也不能完全让IDM来背，等有空了我自己写一个下载器吧（因为**** 所以鸽了）



## 问题3：提示 The request has been throttled 怎么办

完整报错应该是
```json
{"error":{"code":"activityLimitReached","innerError":{"code":"throttledRequest","innerError":{"code":"quota"}},"message":"The request has been throttled","retryAfterSeconds":3892,"@error.X-ClientErrorCode":"quota"}}
```

这个是`onedrive`那边服务器的限制，API被访问次数过多，然后被官方限流了，然后在出现`The request has been throttled`时，无论是IDM 还是 BitComet ，都会出现无法下载情况，返回状态都是429，这种情况只能等待一会，一般会在10-30分钟内自动恢复，你要是不想等，可以按几下F5刷新，

这个问题我有找他们的客服聊过，他们说这个限制是根据订阅的套餐来定的；

然后我查了一下，
我的订阅套餐是 `Microsoft 365 E5 `，读取限制大概约 每小时 12000 次

其实，按理说这个限制完全是够用的，按每人下载使用8个线程，大概一小时可供1500个人下载，我的网盘一天的访问人数也就2000多一点，高峰期可能会出现这种问题，不过问题不大，现在看到提示限制了，过10分钟左右再回来就可以继续下载了。

----

## 后记

前段时间有人一直在攻击我的服务器，请求直接按千万计的，这或许是出现429限制的原因之一，
然后我对网盘进行了重构，接口我尽量限制了，但还是会出现429的情况。
作为服务器攻防小白，我只能凭感觉跟对方斗智斗勇，

之前用的腾讯云CDN，流量这边是因为请求我都给拦回去了所有没有消耗多少。
但是，今年1月，腾讯云坐地起价，直接说https请求需要额外按请求量收费，一次请求0.05元，
然后我去问了他们客服，请求返回错误是否也会收费？
他们给的回复是：就算请求错误，也照样会收费！

12月份的请求共3.9千万次，我这边拦截了2.4千万次的攻击请求，
然后他现在要按请求次数收费？那我实在是受不起这种折腾。
于是我就将网盘从CDN里面撤出来了，

我现在烦死了，有大佬推荐CDN没，我准备整个从腾讯云撤走了。

![](https://mod.3dmgame.com/static/upload/mod/202302/MOD63f8360028792.jpg@webp)





